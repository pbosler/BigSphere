\hypertarget{vtkPlotRHWaveWithLatScalar_8cpp}{\section{vtk\+Plot\+R\+H\+Wave\+With\+Lat\+Scalar.\+cpp File Reference}
\label{vtkPlotRHWaveWithLatScalar_8cpp}\index{vtk\+Plot\+R\+H\+Wave\+With\+Lat\+Scalar.\+cpp@{vtk\+Plot\+R\+H\+Wave\+With\+Lat\+Scalar.\+cpp}}
}
{\ttfamily \#include \char`\"{}vtk\+Actor.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}vtk\+Camera.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}vtk\+Poly\+Data\+Reader.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}vtk\+Poly\+Data.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}vtk\+Poly\+Data\+Mapper.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}vtk\+Property.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}vtk\+Property2\+D.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}vtk\+Caption\+Actor2\+D.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}vtk\+Renderer.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}vtk\+Render\+Window.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}vtk\+Scalar\+Bar\+Actor.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}vtk\+Text\+Actor.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}vtk\+Text\+Property.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}vtk\+Lookup\+Table.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}vtk\+Window\+To\+Image\+Filter.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}vtk\+P\+N\+G\+Writer.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}vtk\+Scalars\+To\+Colors.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}vtk\+Math.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}vtk\+Points.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}Model\+Lookup\+Tables.\+h\char`\"{}}\\*
{\ttfamily \#include $<$iostream$>$}\\*
{\ttfamily \#include $<$cmath$>$}\\*
{\ttfamily \#include $<$string$>$}\\*
{\ttfamily \#include $<$sstream$>$}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{vtkPlotRHWaveWithLatScalar_8cpp_ae66f6b31b5ad750f1fe042a706a4e3d4}{main} ()
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\hypertarget{vtkPlotRHWaveWithLatScalar_8cpp_ae66f6b31b5ad750f1fe042a706a4e3d4}{\index{vtk\+Plot\+R\+H\+Wave\+With\+Lat\+Scalar.\+cpp@{vtk\+Plot\+R\+H\+Wave\+With\+Lat\+Scalar.\+cpp}!main@{main}}
\index{main@{main}!vtk\+Plot\+R\+H\+Wave\+With\+Lat\+Scalar.\+cpp@{vtk\+Plot\+R\+H\+Wave\+With\+Lat\+Scalar.\+cpp}}
\subsubsection[{main}]{\setlength{\rightskip}{0pt plus 5cm}int main (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{vtkPlotRHWaveWithLatScalar_8cpp_ae66f6b31b5ad750f1fe042a706a4e3d4}


Definition at line 29 of file vtk\+Plot\+R\+H\+Wave\+With\+Lat\+Scalar.\+cpp.



References Get\+Color\+For\+Value\+\_\+\+Blue\+White\+Red(), and Get\+Color\+For\+Value\+\_\+\+Rainbow\+Desaturated().


\begin{DoxyCode}
29           \{
30     \textcolor{comment}{//}
31     \textcolor{comment}{// model run parameters (edit this section for specific problems)}
32     \textcolor{comment}{//}
33     \textcolor{keywordtype}{double} dt = 4*0.01;
34     \textcolor{keywordtype}{int} frameOut = 1;
35     \textcolor{keywordtype}{int} finalFrame = 350;
36     \textcolor{keywordtype}{double} relVortMin = -6.71E-05;
37     \textcolor{keywordtype}{double} relVortMax = 6.71E-05;
38     \textcolor{keywordtype}{char} scalarsDataName[16] = \textcolor{stringliteral}{"relVortPanel"};
39     \textcolor{keywordtype}{char} scalarsDataTitle[28] = \textcolor{stringliteral}{"Rel. Vort."};
40     \textcolor{keywordtype}{char} scalarsDataName2[16] = \textcolor{stringliteral}{"tracer1"};
41     \textcolor{keywordtype}{char} scalarsDataTitle2[28] = \textcolor{stringliteral}{"Init. Lat."};
42     \textcolor{keywordtype}{double} latMin = -1.5708;
43     \textcolor{keywordtype}{double} latMax = 1.5708;
44 
45     \textcolor{keywordtype}{char} vtkFileroot[256] = \textcolor{stringliteral}{"/Users/pbosler/Desktop/modelData/vtkOut/rhWave\_remesh20\_reinit4\_quadUnif5\_\_"};
46     \textcolor{keywordtype}{char} vtkFileroot2[256] = \textcolor{stringliteral}{"
      /Users/pbosler/Desktop/modelData/vtkOut/rhWave\_remesh20\_particleData\_quadUnif5\_\_"};
47     \textcolor{keywordtype}{char} imgFileroot[256] = \textcolor{stringliteral}{"/Users/pbosler/Desktop/modelData/imgOut/rhWave\_remesh20\_reinit4\_withScalar\_"};
48     
49     \textcolor{keywordtype}{int} numColorsInColorbars = 1024;
50     \textcolor{comment}{//}
51     \textcolor{comment}{// end edit section }
52     \textcolor{comment}{//}
53     
54     \textcolor{keyword}{const} \textcolor{keywordtype}{double} EARTH\_RADIUS = 0.9 ; \textcolor{comment}{//6371.220; // kilometers}
55     
56 
57     \textcolor{comment}{//}
58     \textcolor{comment}{// initialize .vtk file readers}
59     \textcolor{comment}{//}
60     \textcolor{keywordtype}{char} counterString[4];
61     \textcolor{keywordtype}{int} j;
62     j = sprintf(counterString,\textcolor{stringliteral}{"%04d"},0);
63     \textcolor{keywordtype}{char} vtkFilename[256];
64     \textcolor{keywordtype}{char} vtkFilename2[256];
65     strcpy(vtkFilename, vtkFileroot);
66     strcat(vtkFilename,counterString);
67     strcat(vtkFilename,\textcolor{stringliteral}{".vtk"});
68     strcpy(vtkFilename2, vtkFileroot2);
69     strcat(vtkFilename2,counterString);
70     strcat(vtkFilename2,\textcolor{stringliteral}{".vtk"});
71     
72     cout << \textcolor{stringliteral}{"reading "} << finalFrame + 1 << \textcolor{stringliteral}{" .vtk data files beginning with : "} << endl;
73     cout << \textcolor{stringliteral}{"        "} << vtkFilename << endl;
74     
75     vtkPolyDataReader * relVortData[finalFrame + 1];
76     vtkPolyDataReader * meshData[finalFrame + 1];
77     
78     \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{int} frameJ = 0; frameJ <= finalFrame; frameJ++)
79     \{
80         j = sprintf(counterString,\textcolor{stringliteral}{"%04d"},frameJ);
81         strcpy(vtkFilename, vtkFileroot);
82         strcat(vtkFilename,counterString);
83         strcat(vtkFilename,\textcolor{stringliteral}{".vtk"});
84         strcpy(vtkFilename2, vtkFileroot2);
85         strcat(vtkFilename2,counterString);
86         strcat(vtkFilename2,\textcolor{stringliteral}{".vtk"});
87         
88         relVortData[frameJ] = vtkPolyDataReader::New();
89         meshData[frameJ] = vtkPolyDataReader::New();
90         
91         relVortData[frameJ]->SetFileName(vtkFilename);
92         meshData[frameJ]->SetFileName(vtkFilename2);
93         
94         relVortData[frameJ]->SetScalarsName(scalarsDataName);
95         meshData[frameJ]->SetScalarsName(scalarsDataName2); 
96     \}
97     
98     \textcolor{comment}{//}
99     \textcolor{comment}{// set up scalar colorbars}
100     \textcolor{comment}{//}
101     vtkLookupTable * relVortScale = vtkLookupTable::New();
102         relVortScale->SetRange(relVortMin, relVortMax);
103         relVortScale->SetNumberOfTableValues(numColorsInColorbars);
104         \textcolor{keywordtype}{double} r, g, b, val;
105         \textcolor{keywordtype}{double} range = relVortMax - relVortMin;
106         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < numColorsInColorbars; i++)
107         \{
108             val = relVortMin + ( (double)i/numColorsInColorbars) * range;
109             \hyperlink{ModelLookupTables_8cpp_a61b2630cfebc72a930f9e7adca93582f}{GetColorForValue\_BlueWhiteRed}( val, r, g, b, relVortMin, 
      relVortMax);
110             relVortScale -> SetTableValue(i, r, g, b);
111         \}
112         relVortScale -> Build();
113     vtkTextProperty * colorbarLabelProperties = vtkTextProperty::New();
114         colorbarLabelProperties -> SetColor(0.0, 0.0, 0.0);
115         colorbarLabelProperties -> SetFontSize(12);
116     
117     
118     vtkLookupTable * latScale = vtkLookupTable::New();
119         latScale -> SetRange(latMin, latMax);
120         latScale -> SetNumberOfTableValues(numColorsInColorbars);
121         range = latMax - latMin;
122         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < numColorsInColorbars; i++)
123         \{
124             val = latMin + ( (double)i/numColorsInColorbars) * range;
125             \textcolor{comment}{//GetColorForValue\_NCLDetail( val, r, g, b, latMin, latMax);}
126             \hyperlink{ModelLookupTables_8cpp_a9b1d15e80aa8ed2d663991bd3f36055c}{GetColorForValue\_RainbowDesaturated}( val, r, g, b, latMin, 
      latMax);
127             latScale -> SetTableValue(i, r, g, b);
128         \}
129         latScale -> Build();
130                     
131     
132     \textcolor{comment}{//}
133     \textcolor{comment}{// VTK graphics pipeline}
134     \textcolor{comment}{//}
135     vtkPolyDataMapper * relVortMapper = vtkPolyDataMapper::New();
136         relVortMapper -> SetScalarRange(relVortMin, relVortMax);
137         relVortMapper -> SetLookupTable(relVortScale);
138     vtkPolyDataMapper * meshMapper = vtkPolyDataMapper::New();
139         \textcolor{comment}{//meshMapper -> ScalarVisibilityOff();}
140         meshMapper -> SetScalarRange(latMin, latMax);
141         meshMapper -> SetLookupTable(latScale);
142         
143     vtkActor * relVortSphere = vtkActor::New();
144         relVortSphere -> SetMapper(relVortMapper);
145     vtkActor * meshSphere = vtkActor::New();        
146         meshSphere -> SetMapper(meshMapper);
147         \textcolor{comment}{//meshSphere -> GetProperty() -> EdgeVisibilityOn();}
148         \textcolor{comment}{//meshSphere -> GetProperty() -> SetEdgeColor(0.0, 0.0, 0.0);}
149         \textcolor{comment}{//meshSphere -> GetProperty() -> SetColor(1.0, 1.0, 1.0);}
150     
151     vtkScalarBarActor * relVortColorbar = vtkScalarBarActor::New();
152         relVortColorbar -> SetLookupTable(relVortScale);
153         relVortColorbar -> SetOrientationToVertical();
154         relVortColorbar -> SetLabelTextProperty(colorbarLabelProperties);
155         relVortColorbar -> SetPosition(0.015, 0.1);
156         relVortColorbar -> SetPosition2(0.3, 0.9);
157         relVortColorbar -> SetWidth(0.25);
158         \textcolor{comment}{// relVortColorbar -> SetAnnotationTextScaling(0); // only in VTK 6.0 and later}
159     
160     vtkScalarBarActor * latColorbar = vtkScalarBarActor::New();
161         latColorbar -> SetLookupTable(latScale);
162         latColorbar -> SetOrientationToVertical();
163         latColorbar -> SetLabelTextProperty(colorbarLabelProperties);
164         latColorbar -> SetPosition(0.03, 0.1);
165         latColorbar -> SetPosition2(0.9, 0.9);
166         latColorbar -> SetWidth(0.2);
167     
168     vtkTextActor * annotationText = vtkTextActor::New();
169         annotationText -> SetTextScaleModeToNone();
170         annotationText -> GetTextProperty() -> SetColor(0.0, 0.0, 0.0);
171         annotationText -> GetTextProperty() -> SetFontSize(40);
172         annotationText -> SetPosition(0.2, 0.1);
173         annotationText -> SetPosition2(0.7, 0.25);
174     
175     vtkCamera * camera1 = vtkCamera::New();
176         camera1 -> SetPosition(5.0 * EARTH\_RADIUS, 0.0 * EARTH\_RADIUS, 2.0 * EARTH\_RADIUS);
177         camera1 -> SetViewUp( 0.0, 0.0, 1.0);
178         camera1 -> SetFocalPoint( 0.0, -0.25, 0.0);
179         
180     vtkCamera * camera2 = vtkCamera::New();
181         camera2 -> SetPosition(5.0 * EARTH\_RADIUS, 0.0 * EARTH\_RADIUS, 2.0 * EARTH\_RADIUS);
182         camera2 -> SetViewUp( 0.0, 0.0, 1.0);
183         camera2 -> SetFocalPoint( 0.0, 0.0, 0.0);   
184     
185     vtkRenderer * relVortRenderer = vtkRenderer::New();
186         relVortRenderer -> AddActor(relVortSphere);
187         relVortRenderer -> AddActor(relVortColorbar);
188         relVortRenderer -> AddActor(annotationText);
189         relVortRenderer -> SetBackground(1.0, 1.0, 1.0);
190         relVortRenderer -> SetViewport(0.0, 0.0, 0.5, 1.0);
191         relVortRenderer -> SetActiveCamera(camera1);
192         
193     vtkRenderer * meshRenderer = vtkRenderer::New();
194         meshRenderer -> AddActor(meshSphere);
195         \textcolor{comment}{//meshRenderer -> AddActor(latColorbar);}
196         meshRenderer -> SetBackground( 1.0, 1.0, 1.0);
197         meshRenderer -> SetViewport( 0.5, 0.0, 1.0, 1.0);
198         meshRenderer -> SetActiveCamera(camera2);
199     
200     vtkRenderWindow * renWin = vtkRenderWindow::New();
201         renWin -> AddRenderer(relVortRenderer);
202         renWin -> AddRenderer(meshRenderer);
203         renWin -> SetSize(1200, 600);
204     
205     vtkWindowToImageFilter * win2im = vtkWindowToImageFilter::New();
206         win2im -> SetInput(renWin);
207     
208     vtkPNGWriter * writer = vtkPNGWriter::New();
209         \textcolor{keywordtype}{char} imgFilename[256];
210     
211     cout << \textcolor{stringliteral}{"RENDERING ... "} << endl;
212     
213     \textcolor{keywordtype}{int} nActive = 0;
214     \textcolor{keywordtype}{int} imgCounter = 0;
215     \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{int} frameJ = 0; frameJ <= finalFrame; frameJ+=frameOut)
216     \{
217         \textcolor{keywordtype}{char} annotationString[64];      
218         j = sprintf(annotationString, \textcolor{stringliteral}{"t = %5.2f, N = %6d"}, frameJ*dt, nActive);
219         annotationText -> SetInput(annotationString);
220         
221         relVortMapper -> SetInput( relVortData[frameJ]->GetOutput());
222         meshMapper -> SetInput( meshData[frameJ]->GetOutput());
223         
224         renWin -> Render();
225         win2im -> Modified();   
226     
227         nActive = relVortData[frameJ]->GetOutput()->GetNumberOfCells();
228     
229         j = sprintf(counterString,\textcolor{stringliteral}{"%04d"},imgCounter);
230         strcpy(imgFilename, imgFileroot);
231         strcat(imgFilename, counterString);
232         strcat(imgFilename,\textcolor{stringliteral}{".png"});
233         
234         writer -> SetInput(win2im->GetOutput());
235         writer -> SetFileName(imgFilename);
236         writer -> Write();  
237         
238         imgCounter++;
239         
240         \textcolor{keywordflow}{if} ( frameJ == 0 )
241         \{
242             j = sprintf(annotationString, \textcolor{stringliteral}{"t = %5.2f, N = %6d"}, frameJ*dt, nActive);
243             annotationText -> SetInput(annotationString);
244         
245             relVortMapper -> SetInput( relVortData[frameJ]->GetOutput());
246             meshMapper -> SetInput( meshData[frameJ]->GetOutput());
247         
248             renWin -> Render();
249             win2im -> Modified();   
250     
251             j = sprintf(counterString,\textcolor{stringliteral}{"%04d"},frameJ);
252             strcpy(imgFilename, imgFileroot);
253             strcat(imgFilename, counterString);
254             strcat(imgFilename,\textcolor{stringliteral}{".png"});
255         
256             writer -> SetInput(win2im->GetOutput());
257             writer -> SetFileName(imgFilename);
258             writer -> Write();  
259         \}
260         \textcolor{keywordflow}{if} ( frameJ == finalFrame/4)\{cout << \textcolor{stringliteral}{"... 25\(\backslash\)% done.\(\backslash\)n"};\}
261         \textcolor{keywordflow}{if} ( frameJ == finalFrame/2)\{cout << \textcolor{stringliteral}{"... 50\(\backslash\)% done.\(\backslash\)n"};\}
262         \textcolor{keywordflow}{if} ( frameJ == 3*finalFrame/4)\{cout << \textcolor{stringliteral}{"... 75\(\backslash\)% done.\(\backslash\)n"};\}
263             
264     \}
265 
266     \textcolor{comment}{// }
267     \textcolor{comment}{// clean up}
268     \textcolor{comment}{//      }
269     camera1 -> Delete();
270     camera2 -> Delete();
271     writer -> Delete();
272     win2im -> Delete();
273     renWin -> Delete();
274     meshSphere -> Delete();
275     relVortSphere -> Delete();
276     annotationText -> Delete();
277     relVortColorbar -> Delete();
278     latColorbar -> Delete();
279     relVortRenderer -> Delete();
280     meshRenderer -> Delete();
281     colorbarLabelProperties -> Delete();
282     meshMapper -> Delete();
283     relVortMapper -> Delete();
284     relVortScale -> Delete();
285     latScale -> Delete();
286     \textcolor{keywordflow}{for} ( \textcolor{keywordtype}{int} frameJ=0; frameJ <= finalFrame; frameJ++)
287     \{
288         relVortData[frameJ] -> Delete();
289         meshData[frameJ] -> Delete();
290     \}
291             
292     
293     
294     
295 \textcolor{keywordflow}{return} 0;
296 \};
\end{DoxyCode}
